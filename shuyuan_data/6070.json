[
  {
    "bookSourceComment": "éœ€ç™»å½•\nå¦‚æœæ–‡ç« æœ‰æ›´æ–°ï¼Œè¦å…ˆæ›´æ–°ç›®å½•ï¼Œåœ¨åˆ·æ–°æ­£æ–‡\n\næ ‡ç­¾::https://api.unifans.io/common/getPostsByHashTag?skip={{(page-1)*10}}&limit=10&hashTag=æ ‡ç­¾å&_t=={{Date.now()}}",
    "bookSourceName": "å¼•åŠ›åœˆã€åªèƒ½æœç´¢ä½œè€…ã€‘",
    "bookSourceType": 0,
    "bookSourceUrl": "https://app.unifans.io/feed",
    "bookUrlPattern": ".*/getCollectionDetail.*collectionId=.*",
    "customOrder": 11,
    "enabled": true,
    "enabledCookieJar": true,
    "enabledExplore": true,
    "exploreUrl": "æ ‡ç­¾::https://api.unifans.io/common/getPostsByHashTag?skip={{(page-1)*10}}&limit=10&hashTag=é«˜H&_t=={{Date.now()}}\n\n21ç‚¹ç‰Œ::data:getPersonalInfo;base64,{{java.base64Encode(\"domainName=21dianpai&_t=\"+Date.now())}},{\"type\":\"\"}\n\nAlphamie::data:getPersonalInfo;base64,{{java.base64Encode(\"domainName=y1250082324&_t=\"+Date.now())}},{\"type\":\"\"}",
    "header": "app.yinliquan.app",
    "lastUpdateTime": "1748951765690",
    "loginUi": "[\n    {\n    \t  name:\"ğŸ‘¤ç‚¹å‡»è·³è½¬ç™»å½•\",\n    \t  type: \"button\",\n       action: \"toLogin()\",\n       \"style\": {\n      \"layout_flexGrow\": 1,\n      \"layout_flexBasisPercent\": 0.4\n    }},\n    {\n    \t  name:\"â˜•ï¸æ”¯æŒæºä½œè€…\",\n    \t  type: \"button\",\n       action: \"toThank()\",\n       \"style\": {\n      \"layout_flexGrow\": 1,\n      \"layout_flexBasisPercent\": 0.4\n    }\n    \t}\n]",
    "loginUrl": "<js>\nfunction toLogin(){\n\ta = java.startBrowser(\"https://app.unifans.io/login?redirect=/me\",\"ç™»å½•\")\n\ttoken = java.webView(null,\"https://app.unifans.io\",'localStorage.getItem(\"token\")');\n\tauthorization = {\n \t\"authorization\":String(token)\n \t}\t; \tsource.putLoginHeader(JSON.stringify(authorization));\n\t}\n\n\nfunction login(){\n\t/*\n\t\t {\n        name: \"é‚®ç®±\",\n        type: \"text\"\n    },\n    {\n        name: \"å¯†ç \",\n        type: \"password\"\n    },\n    \n\t\n\temail = source.getLoginInfoMap().get(\"é‚®ç®±\");\n\tpwd = source.getLoginInfoMap().get(\"å¯†ç \");\n\turl = \"https://api.unifans.io/account/login\";\n\tbody = {\n          \"boundMailbox\": String(email),\n          \"password\": String(pwd)\n         }\n\tpost = {\n\t\t\"method\":\"POST\",\n\t\t\"body\":JSON.stringify(body)\n\t\t   }\n\turl = url+\",\"+JSON.stringify(post);\n\ttoken = JSON.parse(java.ajax(url)).data.token;\n\tauthorization = \"hgq \"+token;\n authorization = {\n \t\"authorization\":String(authorization)\n \t}\t; \n \tsource.putLoginHeader(JSON.stringify(authorization));\n \t\n \t*/\n\t}\n\t\n\t\n\tfunction toThank(){\n\tjava.startBrowser(\"data:text/html;base64,PGltZyBzdHlsZT0id2lkdGg6MTAwJSIgc3JjPSJhYm91dDpibGFuayIgb25lcnJvcj0idGhpcy5zcmM9YXRvYignYUhSMGNEb3ZMMmQxWVc1bGNpNTNiM0pyTDJkMVlXNWxjaTV3Ym1jPScpIj4KCg==\",\"æ„Ÿè°¢ä½ çš„æ”¯æŒ\");\t\n\t}\n</js>",
    "respondTime": 180000,
    "ruleBookInfo": {
      "author": "$.data.collection.nickName",
      "coverUrl": "$.data.collection.picture",
      "init": "<js>\nif(!/&_t=/.test(baseUrl) && !/data:getOne/.test(baseUrl)){\nresult = \tjava.ajax(baseUrl+\"&_t={{Date.now()}}\")\n\t}\nresult\n</js>",
      "intro": "<js>\nif(/getPersonalInfo/.test(baseUrl)){\n\tresult =java.getString(\"$.data.description\")+`\\n-----å¤åˆ¶ä¸‹é¢æ–‡å­—ç²˜è´´è‡³å‘ç°åœ°å€-----\\n{{$.data.homeName}}::data:getPersonalInfo;base64,{\\{java.base64Encode(\"domainName={{$.data.domainName}}&_t=\"+Date.now())}\\},{\"type\":\"\"}`\n\t}else{\n\t\tresult = java.getString(\"$.data.collection.comment\")\n\t\t}\n</js>",
      "name": "$.data.collection.name",
      "tocUrl": "<js>\nif(/getPersonalInfo/.test(baseUrl)){\n\tresult = `data:getPersonalInfo;base64,${java.base64Encode(\"domainName={{$.data.domainName}}\")},{\"type\":\"\"}`;\n\t}else if(/getCollectionDetail/.test(baseUrl)){\n\t\tresult = \"https://api.unifans.io/creator/getPostsByCollection?collectionId={{$.data.collection._id}}&skip=0&limit=500&order=0&_t={{Date.now()}}\"\n\t\t}\n</js>"
    },
    "ruleContent": {
      "content": "<js>\nif(/data:postId/.test(baseUrl)){\npostid = \tjava.hexDecodeToString(result)\n\tresult = JSON.parse(book.customVariable)[postid];\n\t}else if(/getCollectionDetail/.test(baseUrl)){\n\t\tif(book.durChapterIndex === chapter.index){\n\t\t\turl = \"https://api.unifans.io/creator/getCollectionDetail?collectionId={{$.data.collection._id}}&_t=\"+Date.now();\n\t\ttitle = \"{{$.data.collection.name}}\";\n\t\turl = \"legado://import/addToBookshelf?src=\"+encodeURIComponent(url);\n\t\thtml = `<!DOCTYPE html>\n<html>\n<head>\n    <title>ã€Š${title}ã€‹åŠ å…¥ä¹¦æ¶</title>\n    <style>\n        body {\n            font-family: 'Microsoft YaHei', sans-serif;\n            background-color: #f5f5f5;\n            margin: 0;\n            padding: 20px;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            min-height: 100vh;\n        }\n        .book-container {\n            background-color: white;\n            border-radius: 12px;\n            box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n            padding: 40px;\n            max-width: 900px;\n            width: 90%;\n            text-align: center;\n            margin-bottom: 30px;\n        }\n        .book-cover {\n            min-width: 60%;  /* å›¾ç‰‡æ›´å¤§ */\n            min-height: 40%; /* å›¾ç‰‡æ›´é«˜ */\n            border-radius: 8px;\n            box-shadow: 0 2px 8px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n            object-fit: contain;\n        }\n        .book-title {\n            font-size: 56px;  /* æ ‡é¢˜æ›´å¤§ */\n            color: #333;\n            margin-bottom: 25px;\n            font-weight: bold;\n        }\n        .book-description {\n            font-size: 50px;  /* ç®€ä»‹æ–‡å­—æ›´å¤§ */\n            color: #555;\n            line-height: 1.6;\n            text-align: left;\n            padding: 0 20px;\n            margin-bottom: 30px;\n        }\n        .action-button {\n            display: inline-block;\n            background-color: #4285f4;\n            color: white;\n            text-decoration: none;\n            font-size: 40px;  /* æŒ‰é’®æ–‡å­—æ›´å¤§ */\n            padding: 16px 40px; /* æŒ‰é’®æ›´å¤§ */\n            border-radius: 30px;\n            margin-top: 30px;\n            transition: all 0.3s ease;\n            box-shadow: 0 2px 5px rgba(66,133,244,0.3);\n        }\n        .action-button:hover {\n            background-color: #3367d6;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 8px rgba(66,133,244,0.3);\n        }\n    </style>\n</head>\n<body>\n    <div class=\"book-container\">\n        <div class=\"book-title\">ã€Š${title}ã€‹</div>\n        <img src=\"{{$.data.collection.picture}}\" class=\"book-cover\">\n        <div class=\"book-description\">\n            ç®€ä»‹ï¼š${java.getString(\"$.data.collection.comment\")}\n        </div>\n        <a href=\"${url}\" class=\"action-button\">åŠ å…¥ä¹¦æ¶</a>\n    </div>\n\n    <script>\n        window.onload = function () {\n            window.location.href = '${url}';\n        };\n    </script>\n</body>\n</html>\n`;\n\t\t\n\t\t\n\t\t\n\t\tscript = `data:text/html;charset=utf-8,${encodeURIComponent(html)}`;\n\t\tjava.startBrowser(script,\"ã€Š\"+title+\"ã€‹\")\n\t\t\n\t\t}\n\t\nresult=\"â—ï¸åˆ·æ–°æœ¬ç« èŠ‚ï¼Œè·³è½¬æœ¬ä¹¦è¯¦æƒ…é¡µ\\n\"+'ç®€ä»‹ï¼š'+java.getString(\"$.data.collection.comment\")+\"\\n\"+'<img src=\"{{$.data.collection.picture}}\">'\n\t\t}else if(/getOne/.test(baseUrl)){\n\t\t\tresult = String(book.intro).replace(/img src/g,'<img src')\n\t\t\t}\n\tresult\n</js>\n\n##\\<img src\\=\"\"\\>",
      "imageStyle": "FULL",
      "replaceRegex": "##Powered by Froala Editor"
    },
    "ruleExplore": {
      "author": "$.creatorName",
      "bookList": "<js>\nif(/localhost/.test(baseUrl)){\n\t\nlet list = [];\n\ndomid = java.hexDecodeToString(result);\n\n\t\tåˆé›†é“¾æ¥ = \"https://api.unifans.io/common/getCollections?\"+domid;\n\t\t\n\tåˆé›† = \tString(java.ajax(åˆé›†é“¾æ¥));\n\tjava.setContent(åˆé›†);\n\tlist = java.getElements(\"$.data.collections[*]\").toArray();\n\n\t\tä¸»é¡µé“¾æ¥ = \"https://api.unifans.io/creator/posts?\"+domid+\"&skip=0&limit=1000&order=1\";\n\tä¸»é¡µ = \tString(java.ajax(ä¸»é¡µé“¾æ¥));\n\t\tjava.setContent(ä¸»é¡µ);\n\t\tä¸»é¡µlist = java.getElements(\"$.data.posts[*]\").toArray().sort((a, b) => {\n    const hasAName = a.collectionDetails[0]?.name != null;\n    const hasBName = b.collectionDetails[0]?.name != null;\n    return hasAName - hasBName ;\n});\n\t\tlist = list.concat(ä¸»é¡µlist)\n\tresult = list.length?JSON.stringify(list):`[{name:\"æ— å†…å®¹\"}]`;\n\t}\n\tresult\n</js>\n$.data.posts[*]||$.[*]",
      "bookUrl": "<js>\n\tif(\"{{$.name}}\"!==\"\"){\n\t\tresult = \"https://api.unifans.io/creator/getCollectionDetail?collectionId={{$._id}}&_t={{Date.now()}}\";\n\t\t}else if(\"{{$.title}}\"!==\"\"){\n\t\t\tresult = `data:getOne;base64,${java.base64Encode(\"{{$.postId}}\")},{\"type\":\"\"}`;\n\t\t\t}\n</js>",
      "coverUrl": "$.picture",
      "intro": "@js:\nintro = java.getString(\"$.previewText&&$.comment\");\ntext = String(java.getString(\"$.text\")).replace(/<\\/*span.*?>| style=\".*?\"/g,'');\nimg ='img src=\"'+ java.getString(\"$..address\")+'\">';\nhtml = text+\"\\n\"+img.replace(/img src=\"\">/g,'');\nintro+\"\\n\"+html;",
      "kind": "@js:\n\"{{$.locked}}\"==\"true\"?\"ğŸ”’\":\"\"",
      "name": "{{$.name||$.title}}",
      "wordCount": "{{$.collectionDetails[*].name}}"
    },
    "ruleSearch": {
      "bookList": "$.data.result[*]",
      "bookUrl": "https://api.unifans.io/common/getPersonalInfo?domainName={{$.domainName}}&_t={{Date.now()}}",
      "checkKeyWord": "++data:getPersonalInfo;base64,ZG9tYWluTmFtZT1ndWExMjM0NTY=,{\"type\":\"\"}",
      "coverUrl": "$.avatar",
      "intro": "$.creatingDes",
      "name": "$.nickName"
    },
    "ruleToc": {
      "chapterList": "<js>\nlet list;\nfunction putContent(list){\n\tlet json = {}\nfor(i in list){\n\ttext = String(java.getString(\"$.text\",list[i])).replace(/<\\/*span.*?>| style=\".*?\"/g,'').replace(/{{HOST}\\}/g,'https://bucket-prod.unifans.io');\n\t\n\timg =String(java.getString(\"$..address\",list[i])).split('\\n').map(x=>'<img src=\"'+x+'\">').join(\"\\n\");\n\n\t\thtml = text+\"\\n\"+img.replace(/<img src=\"\"/g,'');\n\n\t  postid = java.getString(\"$.postId\",list[i]);\n\t  json[postid] = html;\n\t}\n\tbook.putCustomVariable(JSON.stringify(json));\n\t}\n\nif(/getPostsByCollection/.test(baseUrl)){\nlist = java.getElements(\"$.data.posts[*]\").toArray().sort((a, b) => a.createTime - b.createTime);\nputContent(list)\n\tresult = list.length?JSON.stringify(list):`[{name:\"æ— ç›®å½•\"}]`\n\t}else if(/getPersonalInfo/.test(baseUrl)){\n\t\tdomid = java.hexDecodeToString(result);\n\t\tåˆé›†é“¾æ¥ = \"https://api.unifans.io/common/getCollections?\"+domid+\"&_t={{Date.now()}}\";\n\tåˆé›† = \tString(java.ajax(åˆé›†é“¾æ¥));\n\tjava.setContent(åˆé›†);\n\tlist = java.getElements(\"$.data.collections[*]\").toArray();\n\t\t\n\t\tä¸»é¡µé“¾æ¥ = \"https://api.unifans.io/creator/posts?\"+domid+\"&skip=0&limit=1000&order=1&_t={{Date.now()}}\"\n\tä¸»é¡µ = \tString(java.ajax(ä¸»é¡µé“¾æ¥));\n\t\tjava.setContent(ä¸»é¡µ);\n\t\tä¸»é¡µlist = java.getElements(\"$.data.posts[*]\").toArray().sort((a, b) => {\n    const getName = (item) => item.collectionDetails?.[0]?.name ?? null;\n\n    const nameA = getName(a);\n    const nameB = getName(b);\n\n    if (nameA === null && nameB !== null) return -1;\n    if (nameA !== null && nameB === null) return 1;\n\n    // æŒ‰ createTime å‡åºæ’åˆ—ï¼ˆæ—§çš„åœ¨å‰ï¼‰\n    return a.createTime - b.createTime;\n});\n\n\t\tputContent(ä¸»é¡µlist)\n\t\tlist = list.concat(ä¸»é¡µlist)\n\tresult = list.length?JSON.stringify(list):`[{name:\"æ— å†…å®¹\"}]`\n\t\t}else if(/getOne/.test(baseUrl)){\n\t\t\tresult = `[{name:\"${book.name}\"}]`\n\t\t\t}\n</js>\n$.[*]",
      "chapterName": "$.name||$.title",
      "chapterUrl": "<js>\nif(/getPersonalInfo/.test(baseUrl)){\nif(String(java.getString(\"$.name\"))!==\"\"){\n\t\t\t\tresult = \"https://api.unifans.io/creator/getCollectionDetail?collectionId={{$._id}}&_t=\"+Date.now();\n\t\t}else if(String(java.getString(\"$.title\"))!==\"\"){\n\t\t\t\tresult = `data:postId;base64,${java.base64Encode(\"{{$.postId}}\")},{\"type\":\"\"}`;\n\t\t\t}\n}\telse if(/getPostsByCollection/.test(baseUrl)){\n\tresult = `data:postId;base64,${java.base64Encode(\"{{$.postId}}\")},{\"type\":\"unifansContent\"}`;\n\t}\n</js>",
      "isVip": "$.locked",
      "updateTime": "ğŸ’°{{$.sponsorScheme[0].fee}} ç›®å½•æ€»æ•°ï¼š{{$.postCount}} æ‰€å±åˆé›†ï¼š{{$.collectionDetails[*].name}}\n<js>\ntime=\"{{$.updateTime}}\"?java.timeFormat(\"{{$.updateTime}}000\"):\"\"\nresult=time+\" \"+result;\nresult = result\n.replace(/æ‰€å±åˆé›†ï¼š$/g,'')\n.replace(/(?:ğŸ’°|ç›®å½•æ€»æ•°ï¼š)(?!\\d)/g,'')\n.replace(/ğŸ’°0(?![.\\d])/g,'');\n</js>"
    },
    "searchUrl": "https://api.unifans.io/common/searchNickDomainName,{\n\t'method':'POST',\n\t'body':'{\"search\":\"{{key}}\",\"searchType\":\"creator\",\"skip\":0,\"limit\":500}'\n\t}",
    "weight": 0
  }
]