[
  {
    "bookSourceComment": "每隔八小时访问一遍签到（搜索的时候访问）\n\n❗️注意事项:\n1、请不要退出晋江app的账号，只要点了退出，或者在其他地方登录了，都要重新抓token。\n\n2、更新token，书籍就要更新目录。\n\n3、登录步骤：\n①填写好账号密码，点击“邮箱验证码”或者“手机验证码”\n②填写好验证码，点击“邮箱登录”或者“手机登录”\n③点击右上角的“✓”，弹出提示“成功”\n④想要确认是否成功可以在登录UI里点右上角三点，查看登录头token里是否有值。\n\n4、如果邮箱和手机号无法登录，可能是需要过滑动验证码，可尝试先在晋江app里登录一遍后，再在阅读里登录，还是不行就只能抓包token，填写在“抓包token登录”处。\n\n5、如果“抓包token登录”里有值，那么会用“抓包token登录”里的值，想❗️使用其他登录方式，请删除“抓包token登录”里的值。",
    "bookSourceGroup": "①🔰  正版,②🌸  常用",
    "bookSourceName": "🏷晋江文学[百合]",
    "bookSourceType": 0,
    "bookSourceUrl": "https://m.jjwxc.net/channel/",
    "bookUrlPattern": "http://app-cdn.jjwxc.net/androidapi/novelbasicinfo?novelId=\\d+",
    "customOrder": 7,
    "enabled": true,
    "enabledCookieJar": false,
    "enabledExplore": true,
    "exploreUrl": "<js>\ntoken = Map(\"token\")\nat = Map(\"at\");\n\n//一行个数\nvar nums = 4 ;\n//分隔符\nvar separator = '::'\n\n//标题::链接::一行个数::分类\n\n//添加作者格式：作者名::作者id\nauthorNames = decodeURIComponent(at).split(\" \");\nif(authorNames==\"\"){\n\tauthorNames = [];\n\t}else{\n\t\tauthorNames = authorNames.map((x)=>{return x+\"::::at\"});\n\t\tauthorNames.unshift(\"📖 作者 📖::::1\");\n\t\t}\n\t\nall=[\"🍒 其他 🍒::::1\",\"点击签到::https://app.jjwxc.org/androidapi/signin,{\\\"method\\\":\\\"POST\\\",\\\"body\\\":\\\"versionCode=313&sign={{enbody = String(Date.now())+':'+Map('token');String(encode(enbody))}}\\\"}\",\"我的收藏::https://android.jjwxc.net/androidapi/incrementFavorite,{'method':'POST','body':'versionCode=313&token={{Map('token')}}&order=1&classId=&backupTime={{Date.now()}}'}\",\"今日限免::https://app-cdn.jjwxc.net/bookstore/getFullPage?channel=novelfree\",\"百合百大::https://app.jjwxc.org/app.jjwxc/android/reading/TopOneHundred/getRankData?versionCode=389&type=bh,{'headers':{'versionCode': '389'}}\",\"🌸     百合全部    🌸::https://app-cdn.jjwxc.net/bookstore/getFullPage?channel=bhxs&version=3::1\",\"频道金榜::natural_1072\",\"运气淘文::40000009\",\"勤奋更新::natural_1490\",\"月度排行::natural_1043\",\"季度排行::natural_1042\",\"半年排行::natural_1044\",\" VIP新文 ::natural_1069\",\"新晋作者::natural_1045\",\"🌸    百合完结    🌸::https://android.jjwxc.com/search/getSearchForKeyWords?versionCode=221&offset={{(page-1)*20}}&limit=20&bq=0&removetags=0&fw=0&yc=0&xx=3&sd=0&lx=0&fg=0&mainview=0&fbsj=0&isfinish=2&token={{String(source.getLoginHeader())}}&sortType=2::1\",\"重来一世::22000031\",\"幻想未来::22000039\",\"架空历史::22000033\",\"都市情缘::22000040\",\"穿越时空::22000034\",\"天赐良缘::22000041\",\"时尚娱乐::22000042\",\"奇幻异闻::22000032\",\"系统快穿::80000169\",\"宫廷侯爵::80000165\",\"业界精英::80000167\",\"情有独钟::80000171\",\"🌸    百合连载    🌸::::1\",\"重来一世::22000013\",\"幻想未来::22000023\",\"架空历史::22000015\",\"都市情缘::22000024\",\"穿越时空::22000016\",\"天赐良缘::22000025\",\"时尚娱乐::22000026\",\"奇幻异闻::22000014\",\"系统快穿::80000168\",\"宫廷侯爵::80000164\",\"业界精英::80000166\",\"情有独钟::80000170\",\"-------- 标签[百合] --------::::1\",\"轻松::262::::bq\",\"爽文::137::::bq\",\"甜文::124::::bq\",\"正剧::263::::bq\",\"穿书::134::::bq\",\"强强::19::::bq\",\"系统::122::::bq\",\"成长::183::::bq\",\"重生::75::::bq\",\"惊悚::9::::lx\",\"悬疑::10::::lx\",\"剧情::16::::lx\",\"快穿::125::::bq\",\"直播::142::::bq\",\"逆袭::184::::bq\",\"励志::121::::bq\",\"打脸::138::::bq\",\"女强::82::::bq\",\"异能::72::::bq\",\"基建::237::::bq\",\"救赎::329::::bq\",\"女配::96::::bq\",\"暗恋::314::::bq\",\"末世::81::::bq\",\"惊悚::29::::bq\",\"婚恋::78::::bq\",\"科幻::28::::bq\",\"炮灰::305::::bq\",\"开挂::344::::bq\",\"经营::180::::bq\",\"脑洞::273::::bq\",\"烧脑::269::::bq\",\"爱情::1::::lx\",\"武侠::2::::lx\",\"奇幻::3::::lx\",\"仙侠::4::::lx\",\"游戏::5::::lx\",\"传奇::6::::lx\",\"科幻::7::::lx\",\"童话::8::::lx\",\"都市::30::::bq\",\"校园::185::::bq\",\"综漫::6::::bq\",\"星际::135::::bq\",\"日常::268::::bq\",\"柯南::241::::bq\",\"年下::21::::bq\",\"咒回::240::::bq\",\"沙雕::266::::bq\",\"美食::99::::bq\",\"生子::20::::bq\",\"群像::356::::bq\",\"萌宠::205::::bq\",\"文野::208::::bq\",\"治愈::265::::bq\",\"团宠::287::::bq\",\"爆笑::261::::bq\",\"西幻::143::::bq\",\"魔幻::27::::bq\",\"综艺::335::::bq\",\"热血::267::::bq\",\"废土::281::::bq\",\"清穿::18::::bq\",\"朝堂::178::::bq\",\"虫族::260::::bq\",\"玄学::206::::bq\",\"萌娃::302::::bq\",\"钓系::298::::bq\",\"电竞::328::::bq\",\"港风::282::::bq\",\"全息::276::::bq\",\"宫斗::74::::bq\",\"剧透::343::::bq\",\"科举::174::::bq\",\"机甲::97::::bq\",\"虐文::42::::bq\",\"网王::1::::bq\",\"原神::371::::bq\",\"古早::275::::bq\",\"师徒::292::::bq\",\"家教::12::::bq\",\"江湖::35::::bq\",\"忠犬::312::::bq\",\"武侠::11::::bq\",\"七五::8::::bq\",\"宅斗::73::::bq\",\"腹黑::290::::bq\",\"权谋::326::::bq\",\"失忆::320::::bq\",\"猎人::5::::bq\",\"洪荒::67::::bq\",\"卡牌::357::::bq\",\"职场::98::::bq\",\"御姐::310::::bq\",\"盲盒::345::::bq\",\"吐槽::270::::bq\",\"替身::286::::bq\",\"预知::346::::bq\",\"创业::330::::bq\",\"足球::368::::bq\",\"B  E::317::::bq\",\"H  E::318::::bq\",\"ABO::259::::bq\",\"APP::338::::bq\",\"NPC::293::::bq\",\"哨向::369::::bq\",\"田园::58::::bq\",\"中二::375::::bq\",\"群穿::352::::bq\",\"奇谭::197::::bq\",\"囤货::322::::bq\",\"位面::350::::bq\",\"学霸::309::::bq\",\"傲娇::294::::bq\",\"民国::61::::bq\",\"鬼灭::254::::bq\",\"开荒::331::::bq\",\"商战::123::::bq\",\"转生::362::::bq\",\"锦鲤::349::::bq\",\"齐神::201::::bq\",\"血族::69::::bq\",\"网红::141::::bq\",\"现实::271::::bq\",\"扶贫::324::::bq\",\"封神::215::::bq\",\"冰山::296::::bq\",\"聊斋::188::::bq\",\"天降::308::::bq\",\"美娱::140::::bq\",\"毒舌::299::::bq\",\"非遗::323::::bq\",\"吃货::297::::bq\",\"御兽::365::::bq\",\"悲剧::264::::bq\",\"港台::87::::bq\",\"网配::84::::bq\",\"曲艺::306::::bq\",\"婆媳::80::::bq\",\"恶役::359::::bq\",\"轻小说::17::::lx\",\"娱乐圈::64::::bq\",\"无限流::83::::bq\",\"升级流::139::::bq\",\"种田文::66::::bq\",\"年代文::173::::bq\",\"万人迷::295::::bq\",\"美强惨::291::::bq\",\"少年漫::90::::bq\",\"马甲文::243::::bq\",\"克苏鲁::283::::bq\",\"白月光::313::::bq\",\"单元文::355::::bq\",\"高智商::311::::bq\",\"读心术::337::::bq\",\"时尚圈::182::::bq\",\"迪化流::370::::bq\",\"龙傲天::289::::bq\",\"论坛体::354::::bq\",\"对照组::316::::bq\",\"古穿今::65::::bq\",\"红楼梦::15::::bq\",\"反套路::274::::bq\",\"神豪流::348::::bq\",\"纸片人::288::::bq\",\"日韩泰::86::::bq\",\"签到流::351::::bq\",\"读档流::340::::bq\",\"召唤流::347::::bq\",\"大冒险::198::::bq\",\"姐弟恋::186::::bq\",\"模拟器::358::::bq\",\"乙女向::360::::bq\",\"少女漫::14::::bq\",\"吐槽役::366::::bq\",\"犬夜叉::257::::bq\",\"红 包 群::341::::bq\",\"中 世 纪::280::::bq\",\"对 话 体::353::::bq\",\"情有独钟::39::::bq\",\"穿越时空::60::::bq\",\"天作之合::52::::bq\",\"天之骄子::54::::bq\",\"豪门世家::33::::bq\",\"宫廷侯爵::32::::bq\",\"仙侠修真::68::::bq\",\"破镜重圆::47::::bq\",\"业界精英::101::::bq\",\"灵异神怪::26::::bq\",\"幻想空间::25::::bq\",\"先婚后爱::315::::bq\",\"欢喜冤家::41::::bq\",\"悬疑推理::128::::bq\",\"游戏网游::92::::bq\",\"时代奇缘::22::::bq\",\"青梅竹马::62::::bq\",\"因缘邂逅::45::::bq\",\"现代架空::126::::bq\",\"相爱相杀::103::::bq\",\"花季雨季::31::::bq\",\"未来架空::127::::bq\",\"恋爱合约::48::::bq\",\"英美衍生::17::::bq\",\"体育竞技::70::::bq\",\"近水楼台::46::::bq\",\"超级英雄::132::::bq\",\"东方玄幻::144::::bq\",\"布衣生活::38::::bq\",\"乔装改扮::51::::bq\",\"规则怪谈::361::::bq\",\"复仇虐渣::145::::bq\",\"异世大陆::57::::bq\",\"高岭之花::301::::bq\",\"市井生活::175::::bq\",\"赛博朋克::277::::bq\",\"女扮男装::136::::bq\",\"随身空间::56::::bq\",\"第四天灾::285::::bq\",\"前世今生::49::::bq\",\"灵魂转换::23::::bq\",\"西方罗曼::59::::bq\",\"阴差阳错::53::::bq\",\"都市异闻::181::::bq\",\"天选之子::307::::bq\",\"史诗奇幻::199::::bq\",\"时代新风::210::::bq\",\"抽奖抽卡::339::::bq\",\"日久生情::332::::bq\",\"异想天开::190::::bq\",\"边缘恋歌::44::::bq\",\"排球少年::253::::bq\",\"异闻传说::196::::bq\",\"制服情缘::85::::bq\",\"三教九流::36::::bq\",\"神话传说::367::::bq\",\"古代幻想::189::::bq\",\"古典名著::130::::bq\",\"平步青云::55::::bq\",\"灵气复苏::284::::bq\",\"西方名著::16::::bq\",\"荒野求生::319::::bq\",\"赶山赶海::325::::bq\",\"性别转换::24::::bq\",\"真假千金::334::::bq\",\"刀剑乱舞::258::::bq\",\"星穹铁道::372::::bq\",\"多重人格::300::::bq\",\"极品亲戚::336::::bq\",\"骑士与剑::63::::bq\",\"亡灵异族::192::::bq\",\"交换人生::342::::bq\",\"魔法少女::256::::bq\",\"原始社会::279::::bq\",\"七年之痒::79::::bq\",\"蒸汽朋克::278::::bq\",\"古典衍生::20::::lx\",\"东方衍生::18::::lx\",\"西方衍生::19::::lx\",\"历史衍生::91::::bq\",\"其他衍生::21::::lx\",\"追爱火葬场::321::::bq\"];\nall = authorNames.concat(all);\n\n//@天天gg@酷安 下面不要动\nfunction parse(data){\n\tlet args=data.split(separator);\n\tlet title = args[0],url=args[1],num=nums;\n\tif(args[2]!=undefined){num=args[2]}\n\t//链接生成\n\t let u=/^\\d+|natural/.test(url)?\"http://app-cdn.jjwxc.net/bookstore/getFullPage?channelBody=%7B%22\"+url+\"%22%3A%7B%22offset%22%3A%22{{(page-1)*25}}%22%2C%22limit%22%3A%2225%22%7D%7D&versionCode=148\":url;\n\t \n //try {num = args[2] }catch(e){}\n try {tag = args[3];\n u=tag==\"bq\"?'https://android.jjwxc.com/search/getSearchForKeyWords?versionCode=313&offset={{(page-1)*20}}&limit=20&bq='+url+'&removetags=0&fw=0&yc=0&xx=3&sd=0&lx=0&fg=0&mainview=0&fbsj=0&collectionTypes=ors&isfinish=2&sortType=0&token={{Map(\"token\")}\\}':u;\n \nu=tag==\"at\"?'https://app-cdn.jjwxc.com/androidapi/authorColumn?authorid='+url:u;\n u=tag==\"lx\"?'https://android.jjwxc.com/search/getSearchForKeyWords?versionCode=313&offset={{(page-1)*20}}&limit=20&bq=0&removetags=0&fw=0&yc=0&xx=3&sd=0&lx='+url+'&fg=0&mainview=0&fbsj=0&collectionTypes=ors&isfinish=2&sortType=0&token={\\{Map(\"token\")}}':u\n }catch(e){}\n\treturn [title, u, num]\n\t}\n\nfunction FlexBox(title, url, num){\n\t\t let obj={};\n\t\t obj.style={},obj.title=title,obj.url=url?url:'',obj.style['layout_flexGrow']=1;\n\t//数值设定\n\tlet data={1:1,2:0.4,3:0.25,4:0.2,5:0.15,7:0.1,10:0.05};\nobj.style['layout_flexBasisPercent']=data[num]\n\t\treturn obj\n\t\t}\nresult=JSON.stringify(all.map(data=>{\n\tlet args=parse(data);\n\treturn FlexBox.apply(null, args)\n\t}))\n</js>",
    "header": "<js>\nlet date=\"Mobile \"+Date.now();\nresult = JSON.stringify({\n\t\"User-Agent\": String(date),\n\t\"versiontype\":\"reading\"\n\t})\n</js>",
    "jsLib": "function encode(data){\n\tconst { java } = this;\n  return\tjava.createSymmetricCrypto(\"DES/CBC/PKCS5Padding\", String(\"KW8Dvm2N\"), String(\"1ae2c94b\")).encryptBase64(data)\n\t}\n\t\nfunction Map(e) { \n\t  const { source } = this;\n    let infomap = source.getLoginHeaderMap();\n    let map = (infomap !== null && infomap.get(e)) ? infomap.get(e) : '';\n    return String(map);\n}\n\n\t\nfunction setHead(k,v){\n\tconst { source } = this;\n  let  infomap = source.getLoginHeaderMap();\n  let map = (infomap !== null && infomap !== \"\")?infomap:{};\n  map[k] = v;\n  source.putLoginHeader(JSON.stringify(map))\n\t}",
    "lastUpdateTime": "1739934677878",
    "loginCheckJs": "",
    "loginUi": "[\n\t{\n    \t  name:\"抓包token登录\",\n    \t  type:\"password\"\n    \t},\n    {\n    \t  name:\"账号\",\n    \t  type:\"text\"\n    \t},\n    \t{\n    \t  name:\"密码\",\n    \t  type:\"password\"\n    \t},\n    \t{\n    \t  name:\"验证码\",\n    \t  type:\"text\"\n    \t},\n    \t{\n        name: \"①获取邮箱验证码\",\n        type: \"button\",\n        action: \"getCode('email')\"\n    },\n     {\n        name: \"②邮箱登录\",\n        type: \"button\",\n        action: \"getCode('email')\"\n    },\n    {\n        name: \"①获取手机验证码\",\n        type: \"button\",\n        action: \"getCode('phone')\"\n    },\n    {\n        name: \"②手机登录\",\n        type: \"button\",\n        action: \"getCode('phone')\"\n    },\n    \t{\n    \t\tname:\"作者列表（作者::作者id 注意添加多个用空格分割）\",\n    \t\ttype:\"text\"\n    \t\t}\n]",
    "loginUrl": "<js>\n//请不要改书源的任何地方，请点击“登录”后再填写\nfunction rd(){\n\tlet n = [0,1,2,3,4,5,6,7,8,9];\n\tlet s =\"\";\n\tfor(i=0;i<20;i++){\n\t\tr=Math.floor(Math.random()*10);\n\t\ts+=n[r]\n\t\t}\n\t\treturn s\n\t}\n\nfunction getloginUrl(){\n\tlet 账号 = result.get(\"账号\");\n\tlet 密码 = result.get(\"密码\");\n\tlet en = encode(密码);\n\tlet id = rd()+\":\"+java.androidId()+\"d4:\";\n\tlet sign = encode(Date.now()+\"_\"+id+\"_\");\n\tlet loginUrl = `https://app.jjwxc.org/androidapi/login?versionCode=401&loginName=${encodeURIComponent(账号)}&encode=1&loginPassword=${encodeURIComponent(en)}&sign=${encodeURIComponent(sign)}&identifiers=${encodeURIComponent(id)}&autologin=1`;\n\treturn loginUrl\n\t}\n\nfunction getCode(t){\n\tlet 验证码 = result.get(\"验证码\");\n\tlet 账号 = result.get(\"账号\");\n\tlet 密码 = result.get(\"密码\");\n\t\n\tif(!/^\\d{4,}/.test(验证码)){\n\t\t\nlet res = \tJSON.parse(java.ajax(getloginUrl()));\n\nif(res.code==\"221003\"){\n\tlet url = \"https://app.jjwxc.org//appDevicesecurityAndroid/getDeviceSecurityCode\";\n\tbody = \"versionCode=401&username=\"+encodeURIComponent(账号)+\"&checktype=\"+t;\n\toption = {\n\t\t\"method\":\"POST\",\n\t\t\"body\":String(body)\n\t\t}\n\t\t\tmsg = JSON.parse(java.ajax(url+\",\"+JSON.stringify(option))).data.message;\n\t\tjava.toast(msg);\n\t\t}else{\n\t\t\tjava.toast(res.message)\n\t\t\t}\n}else{\n\t\tlet lurl = getloginUrl()+\"&checktype=\"+t+\"&checkdevicecode=\"+验证码;\n\t\tlet token = JSON.parse(java.ajax(lurl)).token;\n\t\tjava.toast(\"获取到token，请点击“✓”：\"+token);\n\t\tsource.putLoginHeader(token)\n\t}\n}\n\nfunction login(){\n\tlet token;\n\tlet M = source.getLoginInfoMap();\n\tM == (M == null||M==\"\")?{}:M;\n\ttoken = source.getLoginHeader();\n\tlet t = source.getLoginInfoMap()[\"抓包token登录\"];\n\tif(t!=\"\"&&t!=null){\n\t\ttoken = t;\n\t\t}\n\tif(/\\{/.test(token)){\n\t\ttoken = Map(\"token\")!=\"\"?Map(\"token\"):t\n\t\t}\n\tlet at = M.get(\"作者列表（作者::作者id 注意添加多个用空格分割）\");\n\tat = (at==\"\"||at==null)?\"\":at;\n\t option = {\n\t \t\"token\":String(token),\n\t \t\"at\":encodeURIComponent(String(at))\n\t \t}\n\tsource.putLoginHeader(JSON.stringify(option))\n\t}\n</js>",
    "respondTime": 21443,
    "ruleBookInfo": {
      "author": "$.authorName",
      "canReName": "1",
      "coverUrl": "{{$.novelCover}}\n<js>\n\nif(/(?:postimg|bmp|alicdn)\\./.test(result)){\n\tjava.setContent(src);\n\tresult = \"https://i9-static.jjwxc.net/novelimage.php?novelid={{$.novelId}}\"\n\t}else{\n\t\tresult = result\n\t\t}\n\t\t\n\t\theader = {\n\t\t\"headers\":{\n\t\t\t\"referer\":result.match(/(^https?:\\/\\/.*?\\/)/)[1]\n\t\t\t}\n\t\t}\nresult = (result +\",\"+ JSON.stringify(header)).replace(/wx\\d+/,'wx2')\n</js>",
      "init": "",
      "intro": "<js>\n//请假条\ntry{\na=JSON.parse(java.ajax('http://app.jjwxc.org/androidapi/getnovelOtherInfo?novelId='+baseUrl.match(/(\\d+)/)[1]+'&type=novelbasicinfo&versionCode=163'));\n\njava.put(\"pv\",a.novelreview)\n\n$=a.novelLeave;\nn='\\n';\nleave=$.leaveContent?'————————•————————'+n+'​'+n+$.leaveDateBack+n+'​'+'​'+'      '+$.leaveContent+n+$.leaveDate.replace(/请假时间：/,'⌚️')+n+$.leaveIntro:'';\njava.put('leave',leave);\njava.put('intro',JSON.parse(result).novelIntro.replace(/\\#/g,'＃'));\nresult}catch(err){\njava.log(err);\njava.put('leave',\"\");\njava.put('intro',\"\");\n}\n</js>\n{{/开启购买/.test(book.getVariable(\"custom\"))?\"&nbsp;&nbsp;💰已开启自动购买下五章，建议删除书籍变量的[开启/关闭购买]文字，避免刷新书籍时反复进行网络请求<br>\\nㅤ<br>\":\"\"}}\n&nbsp;&nbsp;📖{{$.novelIntroShort##。$}}📖\n{{'\\nㅤ'}}<br>\n🏆{{$.ranking}}    🍼{{$.nutrition_novel}}    📝{{$.comment_count}}    🔖{{$.novelStyle}}\n◉ 标签：{{$.novelTags##,|\\s##🏷}}<br>\n◉ {{$.protagonist##,|，|；|;##、}}<br>\n◉ {{$.costar##,|，|；|;##、}}<br>\n◉ {{$.other##,|，|；|;##、}}<br>\n◉ 视角：{{$.mainview}}<br>\n◉ 评分：{{java.get(\"pv\")}}<br>\n◉ 收藏：{{$.novelbefavoritedcount}}<br>\n{{String(java.get('intro')).replace(/立意:/,'◎◎ 立意：')}}<br>{{java.get('leave')}}<br>\n{{'\\n'+'​'}}\n添加作者：{{$.authorName}}::{{$.authorId}}\n<js>\nresult=String(result);\nli=result.match(/◎ 立意.*/)?'ㅤ\\n'+result.match(/(◎ 立意.*?<br>)/)[1]:'';\nString(result).replace(/📖📖|📖''📖/,'').replace(/(◉ 收藏.*?<br>)/,'$1\\n'+li+'ㅤ\\n'+'————————•————————\\n').replace(/◎◎ 立意.*<br>/,'').replace(/(?:◉ 标签：|◉ 主角：|◉ 配角：|◉ 其它：|◉ 视角：|◉ 评分：|ㅤ\\n◎ 立意：)<br>/g,'')</js>",
      "kind": "{{step=java.getString('$.novelStep')=='2'?'已完结':'连载中';}},{{$.novelClass}}##-##,",
      "lastChapter": "<js>\ntry{last=JSON.parse(java.ajax('http://android.jjwxc.net/androidapi/chapterList?novelId='+baseUrl.match(/(\\d+)/)[1])).chapterlist;\n$=last[last.length-1];\nvip=$.isvip?'🔒':'';\nchapterid=$.chapterid;\nchaptername=$.chaptername;\ndate=$.chapterdate;\nvip+chapterid+'.'+chaptername+'•'+date}\ncatch(err){\nresult=\"请刷新或暂无目录\"\n}\n</js>",
      "name": "$.novelName",
      "tocUrl": "@js:\ntoken = Map(\"token\");\nnovelId=baseUrl.match(/novelId=(\\d+)/)[1]\nif(/\\d+_[\\w\\d]{16,}/.test(token)){\n\turl = \"https://android.jjwxc.net/androidapi/chapterList?novelId=\"+novelId+\"&more=0&whole=1&token=\"+token;\n\t}else{\nurl = \"https://android.jjwxc.net/androidapi/chapterList?novelId=\"+novelId+\"&more=0&whole=1\"\n}",
      "wordCount": "$.novelSize##,"
    },
    "ruleContent": {
      "content": "<js>\nfunction decode(){\n        let v43,v38,dest;\n        let date=\"Mobile \"+Date.now();\n        let respose = java.get(baseUrl,{\"User-Agent\": String(date)}); \n        \n        let content = String(respose.body());\n        let accesskey = String(respose.header(\"accesskey\"));\n        let keyString = String(respose.header(\"keystring\"));\n  \n        let accesskeyLen = accesskey.length;\n        let v9 =0;\n        let v6 = String(accesskey[accesskeyLen-1]).charCodeAt();\n        for(i=0;i<accesskeyLen;i++){\n\t        v9 += accesskey[i].charCodeAt();\n\t    }\n        let v15 = v9 %  keyString.length;\n        let v17 = parseInt(v9 / 65);\n        let v18 = keyString.length;\n        if( v17 +v15 > v18){\n\t        v43 = keyString.substring(v15,(v18-v15)+v15)\n\t    }else{\n\t\t    v43 = keyString.substring(v15,v17+v15)\n\t\t}\n        let v32 = content.length;\n        if((v6 & 1)!=0){\n            v38 =\tcontent.substring(v32-12,v32)\n\t        dest = content.substring(0,v32-12)\n\t    }else{\n\t\t    v38 = content.substring(0,12);\n\t\t    dest = content.substring(12,content.length);\n\t\t}\n\t    let key = java.md5Encode(v43+v38).substring(0,8);\n\t    let iv = java.md5Encode(v38).substring(0,8);\n\t    content = java.createSymmetricCrypto(\"DES/CBC/PKCS5Padding\", String(key), String(iv)).decryptStr(dest);\n        return content\n}\n\nif(/jjwxc/.test(baseUrl)){\n    intro=String(java.get(\"intro1\")).replace(/\\s/g,'');\n    /\"content\"/.test(result)?java.setContent(result):java.setContent(decode());\n    intro=intro!=\"\"?\"◎\"+intro+\"◎<br>\":\"\"; \n    content=java.getString(\"$..content\");\n    saybody=java.getString(\"$..sayBody\");\n    say=saybody!=\"\"?\"\\n【📢作者有话说】\\n\"+saybody:\"\";\n    if(/token/.test(baseUrl)){\n        vipc=String(content).length > 30?java.createSymmetricCrypto(\"DES/CBC/PKCS5Padding\", String(\"KW8Dvm2N\"), String(\"1ae2c94b\")).decryptStr(content):java.getString(\"$..message\")+\"\\n登录后请更新目录，刷新正文\";\n        result=intro+String(vipc+say);\n    }else{\n        result=intro+content+say\n    }\n}else{\n    result=\"\"\n}\n\n//评论开启\nlet bbb = book.getVariable(\"custom\")\nlet sss=source.getVariable()\nif(/评论/.test(bbb) || /评论/.test(sss)){\n    let commentNum =/评论/.test(bbb)?bbb.match(/评论(\\d+)/)[1]:sss.match(/评论(\\d+)/)[1];\n    if(/chapterContent/.test(baseUrl)){\n        commentUrl = baseUrl.replace(/androidapi/,'comment').replace(/chapterContent/,'getCommentList')+\"&limit=\"+commentNum+\"&offset=0\";\n    }\n    comment = JSON.parse(java.ajax(commentUrl));\n    cflag = (comment.code == \"200\" || comment.code == undefined) ? true:false;\n    \n    commentList = [];\n    if(cflag){\n        commentList =comment.commentList || comment.data.commentList ||[];\n        commentb = \"\";\n    }else{\n\t    commentb = comment.message\n\t    }\n    for(i=0;i<commentList.length;i++){\n\t    let b = commentList[i];\n\t    let author = b.commentAuthor;\n\t    let body = b.commentBody;\n\t    let time = b.commentDate;\n\t    commentb += \"@\"+author+\" 🕘\"+time+\"\\n\"+body+\"\\n&lrm;\\n\";\n    }\n    result = result + \"\\nㅤ\\n最新评论：\\n\" \n                + commentb.replace(/&lt;br&gt;/g,'\\n');\n}\n\nresult\n</js>\n##为营造更好的评论环境，近期网站要求发评须进行实名认证，未实名用户评论暂时仅在对应作者后台及发评用户后台可见.*|获取正文失败[\\s\\S]+|◎\\s+?◎|◎undefined◎",
      "imageStyle": "TEXT",
      "nextContentUrl": "",
      "payAction": "cid = baseUrl.match(/chapterId=(\\d+)/)[1];\nnid = baseUrl.match(/novelId=(\\d+)/)[1];\ntoken = Map(\"token\");\n\nenbody = String(Date.now())+\":\"+token+\":\"+nid;\nsign = encode(enbody)\n\nbody = \"versionCode=287&novelId=\"+nid+\"&chapters=\"+cid+\"&orderType=15&isautoBuy=0&autosubscribeStatus=0&notUseBackpoint=&sign=\"+sign;\n\nurl = \"https://android.jjwxc.net/androidapi/buy,\"\npost = {\n\t\"method\":\"POST\",\n\t\"body\":String(body)\n\t}\n a = java.ajax(url+JSON.stringify(post));\n \n if(/购买成功/.test(JSON.parse(a).message)){\n \tjava.longToast(JSON.parse(a).message);\n \tresult  = true\n \t}else{\n \t\tmm = JSON.parse(a).message==\"\"?JSON.parse(a).popupdata.popupmessage+\"\\n❗️进晋江app进行一次验证后❗️才能在阅读app使用购买功能\":JSON.parse(a).message;\n    \n \t\tjava.longToast(mm);\n \t\t\n \t\t}",
      "replaceRegex": "<js>\n//去除章节简介与正文重复\nif(/^◎/.test(result) ){\nchapter = result.match(/◎([\\s\\S]+?)(…)*◎/)[1].replace(/\\s/g,'').replace(/,/g,'，');\n\nchapter2=result.match(/◎[\\s\\S]+?◎([\\s\\S]+)/)[1].replace(/\\s/g,'').replace(/,/g,'，');\n\n//前4个字相同就删除\nnum = 4\nif(chapter.substring(0,num)==chapter2.substring(0,num)){\n\tresult = result.replace(/◎[\\s\\S]+?◎/,'')\n\t}else{result}\n}else{result}\n\nfunction removeDuplicatedParagraphs(text, chapterTitle) {\n    var paragraphs = text.split('\\n');\n    \n    for (var i = 0; i < 2; i++) {  // 只处理前两段\n        var paragraph = paragraphs[i];\n        if(paragraph!=undefined){\n        // 检查段落结尾是否有标点符号\n        var lastChar = paragraph.charAt(paragraph.length - 1);\n        var isPunctuation = /[◎】。！？…~]/.test(lastChar);\n\n        if (!isPunctuation) {\n            // 只要有一个字与章节名相同就删除\n            for (var char of chapterTitle) {\n                if (paragraph.includes(char)) {\n                    paragraphs.splice(i, 1);\n                    i--;  // 因为删除了一个段落，所以索引要回退一位\n                    break;\n                }\n            }\n        }\n      }\n    }\n\n    return paragraphs.join('\\n');\n}\nresult = removeDuplicatedParagraphs(result,title);\nresult.replace(/<br\\/>/g,'\\n')\n</js>",
      "sourceRegex": "",
      "webJs": ""
    },
    "ruleExplore": {
      "author": "$.authorName||$.authorname",
      "bookList": "@JSon:$..[?(@.novelName)]&&$..[?(@.novelname)]&&$.massage\n<js>\nif(result){\nfunction remove(a,b){\nlet delIndexList = a; // 要删除的序列\n if (delIndexList.length !== 0) { \nfor (let i = delIndexList.length - 1; i >= 0; i--) { b.splice(delIndexList[i], 1) } \nreturn b\n}\n}\n\nif(baseUrl=='https://app-cdn.jjwxc.net/bookstore/getFullPage?channel=bhxs&version=3'||baseUrl.match(/novelfree/)){\nlist=JSON.parse(src);\nfor(i in list){\nchannelName=list[i].channelName;\nblist=list[i].data;\nif(blist!=\"undefined\"){\nfor(j in blist){\nblist[j].channelName=channelName\n}}else{blist.channelName=channelName}\n\n}\nif(!baseUrl.match(/novelfree/)){\nlist=remove([0, 6,11,12,13],list)\n}else{\nlist=remove([1],list)\n}\nresult=JSON.stringify(list);}\nelse if(baseUrl.match(/signin|getSearchForKeyWords/)){\nresult=\"{signIn:[\"+src+\"]}\"\n}\nelse{result=result}\n}else{result=\"\"}\n</js>\n$..[?(@.novelName)]&&$..[?(@.novelname)]&&$.signIn[*]",
      "bookUrl": "http://app-cdn.jjwxc.net/androidapi/novelbasicinfo?novelId={{$.novelid||$.novelId}}@put:{id:$.novelid||$.novelId}",
      "coverUrl": "@JSon:$.cover||$.novelCover||$.ebookurl||$.novel_cover\n<js>\nif(/(?:postimg|bmp|alicdn)\\./.test(result)){\n\tjava.setContent(src);\n\tresult = \"https://i9-static.jjwxc.net/novelimage.php?novelid={{$.novelId}}\"\n\t}else{\n\t\tresult = result\n\t\t}\n\t\theader = {\n\t\t\"headers\":{\n\t\t\t\"referer\":result.match(/(^https?:\\/\\/.*?\\/)/)[1]\n\t\t\t}\n\t\t}\nresult = (result +\",\"+ JSON.stringify(header)).replace(/wx\\d+/,'wx2')\n</js>",
      "intro": "$.novelIntroShort||$.novelintroshort\n<js>\nfree=\"{{$.freeDate}}\";\nif(free!=\"\"){\nresult=\"限免日期：🗓\"+free+\"\\n\"+result\n}else{\nresult=result\n}\n</js>",
      "kind": "@JSon：$.mainview&&$.channelName&&$.tags&&$.novelSizeformat&&$.className##\\s+##,",
      "lastChapter": "第{{$.maxChapterId}}章##第章",
      "name": "$.novelName||$.novelname||$.message",
      "wordCount": "$.novelStep||$.novelstep\n@js:result==2?'已完结':'连载中';\nif(result==\"\")\"\""
    },
    "ruleSearch": {
      "author": "author",
      "bookList": "$.items[:20]\n<js>\nif(!cache.get(\"jjtime\")){\n\t    cache.put(\"jjtime\", true , 23200);\n\t    url = \"https://app.jjwxc.org/androidapi/signin\";\n\t    enbody = String(Date.now())+':'+ Map(\"token\")  \n\t    let option = {\n\t    \t\"method\":\"POST\", \t\"body\":\"versionCode=313&sign=\"+encode(enbody)\n\t    \t}\n\t    jjsign = java.ajax(url+\",\"+JSON.stringify(option));\n\t    java.toast(JSON.parse(jjsign).message)\n\t}\npage=java.get(\"page\");\nkey=java.get(\"key\");\nauthorUrl = \"https://app.jjwxc.org/androidapi/search?versionCode=191&keyword=\"+key+\"&type=2&page=\"+page+\"&searchType=7&sortMode=DESC\"\nauthorlist=JSON.parse(java.ajax(authorUrl)).items\n\nlist=result.toArray().concat(authorlist);\njson=[];\nfor(i in list){\n\ttry{\nid=list[i].novelid;\nurl=\"http://www.jjwxc.net/onebook.php?novelid=\"+id;\nhtml=String(java.ajax(url));\njava.setContent(html);\nJ=org.jsoup.Jsoup.parse(html);\n\nauthorid = J.select('h1+span>a,h2 a').attr(\"href\").match(/(\\d+)/)[1];\n\ndes=String(J.select(\"span[style='color:#F98C4D']\").text()).replace(/立意：/,'◎ ').replace(/一句话简介：/,'◎ ')+\"◎\"+java.getElement(\"id.novelintro\").text();\ntitle=J.select('h1').text();\nauthor=J.select('span[itemprop=\"author\"]').text();\ncover=J.select(\".noveldefaultimage\").attr(\"src\");\nif(/(?:postimg|bmp|alicdn)\\./.test(cover)){\n\tcover = \"https://i9-static.jjwxc.net/novelimage.php?novelid=\"+id\n\t}\n\theader = {\n\t\t\"headers\":{\n\t\t\t\"referer\":cover.match(/(^https?:\\/\\/.*?\\/)/)[1]\n\t\t\t}\n\t\t}\ncover = (cover +\",\"+ JSON.stringify(header)).replace(/wx\\d+/,'wx2');\ncat=String(J.select('a[style=\"text-decoration:none;color: red;\"]').text()).replace(/\\s/g,',');\nstatus=J.select('span[itemprop=\"updataStatus\"]').text();\nsize=String(J.select('span[itemprop=\"wordCount\"]').text()).replace(/字/,'');\nn=String(java.getElement('@@id.oneboolt@tag.tr.-2@span').text()).replace(/\\n/,'•').replace(/\\*最新更新/,'').replace(/(.*?)\\[VIP\\]/,'🔒$1');\nnum=java.getElement('@@id.oneboolt@tag.tr.-2@tag.td.0').text();\ngenre=J.select('[itemprop=\"genre\"]').text().split('-')[1];\nview = html.match(/<span>作品视角：<\\/span>([^<]+)<\\/li>/)[1].replace(/\\s/g,'');\njson.push({\ntitle:title,\nauthor:author,\ncat:view+\",\"+status+\",\"+cat+','+genre,\nsize:size,\nurl:\"http://app-cdn.jjwxc.net/androidapi/novelbasicinfo?novelId=\"+id,\ndes:des,\nnew:String(num+\"、\"+n).replace(/(\\d+、)🔒/,'🔒$1').replace(/^章节、|、$/,''),\ncover:cover\n})\n}catch(e){\n\tjava.log(e)\n\t}\n}\njson\n</js>",
      "bookUrl": "url",
      "checkKeyWord": "穿进刑侦文",
      "coverUrl": "cover",
      "intro": "des",
      "kind": "cat",
      "lastChapter": "new",
      "name": "title",
      "wordCount": "size"
    },
    "ruleToc": {
      "chapterList": "<js>\nmessage = JSON.parse(src).message;\nnovelId=baseUrl.match(/novelId=(\\d+)/)[1];\n\nif(/token=\\d+_[\\w\\d]{16,}/.test(baseUrl)&&!/1058/.test(message)){\nlet lessData = JSON.parse(src).chapterlist;\n\n有卷名url = \"https://android.jjwxc.net/androidapi/chapterList?novelId=\"+novelId+\"&more=0&whole=1\";\n\nlet moreData = JSON.parse(java.ajax(有卷名url)).chapterlist;\n\nfor(let item of lessData) {\n    let match = moreData.find(moreItem => moreItem.chapterid === item.chapterid && moreItem.chaptertype === item.chaptertype);\n    if(match) {\n        Object.assign(match, item);\n    }\n}\nJSON.stringify(moreData)\n}else{\n\tresult = src\n\t}\n</js>\n$.chapterlist[*]||$.[*]\n\n<js>\nfunction readEncrypt(novelid,flag) {\n\t     token = Map(\"token\");   \n     \tFORUMSIGNTAG = 1;\n       READSIGNTAG = 0;\n\t      strArr = [token,novelid,\"autosubscribe\",flag];       \n\t      sb = new Date().getTime().toString();\n         length = strArr.length;\n        for ( i2 = READSIGNTAG; i2 < length; i2 += FORUMSIGNTAG) {\n            str = strArr[i2];\n            sb+=\":\";\n            sb+=str;\n        }   \n     let option = {\n\t    \t\"method\":\"POST\", \t\"body\":\"versionCode=313&sign=\"+encode(sb)\n\t    \t}\n\t    \nurl = \"https://android.jjwxc.com/androidapi/autoSubscribe,\"+JSON.stringify(option)\n\n java.longToast(JSON.parse(java.ajax(url)).message)\n    }\n    \n if(/(开启|关闭)购买/.test(book.getVariable(\"custom\"))){\n \ta = /关闭购买/.test(book.getVariable(\"custom\"))?\"cancel\":(/开启购买/.test(book.getVariable(\"custom\"))?\"open\":\"cancel\");\n \t\n readEncrypt(result[0].novelid,a)\n \t}\n \t\nresult = result[0]==\"1058\"||result[0]==\"1068\"?JSON.stringify([{\"chaptername\":\"暂无目录\",\"chapterid\":\"\",\"islock\":\"0\"}]):result;\n</js>\n$.[*]",
      "chapterName": "<js>\n$=result;title=$.chaptername;title=String(title).replace(/^\\s+/,'');intro=$.chapterintro;vip=$.isvip!='0';lock=$.islock!='0';type=$.chaptertype=='1'?true:false;num=!type?$.chapterid+\"  ☪ \":'';\n\n\nbbb = book.getVariable(\"custom\");sss = source.getVariable();\nif(/去章节序号/.test(bbb) || /去章节序号/.test(sss)){\nnum=''\n}\nif(/章节名/.test(bbb) || /章节名/.test(sss)){\nnum=!type?\"第\"+$.chapterid+\"章 \":'';\n}\ntitle=type?'📖 '+title+' 📖':title;\nif( (/目录简介/.test(bbb) || /目录简介/.test(sss))&&!/📖/.test(title)){\n\tfu = /目录简介【(.*?)】/.test(bbb)?bbb.match(/目录简介【(.*?)】/)[1]:sss.match(/目录简介【(.*?)】/)[1]\n\ttitle = title +fu+intro\n\t}else{\n\t\tjava.put(\"intro1\",intro);\n\t\t}\nl=lock?'[此章节已锁]':'';\nresult=num+title+l;\n</js>",
      "chapterUrl": "@js:\n$=result;\nchapterid=$.chapterid;\nvip=$.isvip!='0';\ntype=$.chaptertype=='1';\nif( !type){\nif(!vip){\nresult='https://app.jjwxc.net/androidapi/chapterContent?novelId='+baseUrl.match(/novelId=(\\d+)/)[1]+'&chapterId='+chapterid\n}else{\n\tMap = source.getLoginHeaderMap();\nMap = Map==null?{}:Map;\n\turl =\"https://app.jjwxc.org/androidapi/chapterContent?novelId=\"+baseUrl.match(/novelId=(\\d+)/)[1]+\"&versionCode=381&token=\"+Map[\"token\"]+\"&chapterId=\"+chapterid\n\t}\n}else{ result=\"\"}",
      "formatJs": "",
      "isPay": "<js>\npoint=(\"{{$.point}}\"=='0');\nchapterMessage =!/VIP|番外/.test(\"{{$.chapterMessage}}\")\nif(chapterMessage||point){\n\tresult=true\n\t}else{\n\t\tresult=false\n\t\t}\n</js>",
      "isVip": "<js>\nvip = (\"{{$.isvip}}\"!=\"0\");\ntype = (\"{{$.chaptertype}}\"=='1');\nresult = !type?(vip?true:false):false\n</js>",
      "isVolume": "<js>\n\"{{$.chaptertype}}\"=='1'?true:false;\n</js>",
      "preUpdateJs": "tocUrl = book.tocUrl;\nif(/token=\\d+_[\\w\\d]{16,}/.test(tocUrl)){\n   let src = \tjava.ajax(tocUrl);\n\t message = JSON.parse(src).message;\n\t if(/登入验证失败/.test(message)){\n\t \t     newToken = Map(\"token\");\t     \n\t \t     oldToken = tocUrl.match(/token=(\\d+_[\\w\\d]{16,})/)[1];    \n\t \t     if(newToken == oldToken)setHead(\"token\",\"\");  \t  \t      \n\t       java.longToast(\"登录token已失效，请重新登录\");\n\t       java.refreshTocUrl();\n\t    }\n\t}",
      "updateTime": "{{$.chaptersize}}字•{{$.chapterdate}}•{{$.chapterintro##^\\s*}}##^•|0000-00-00.*|^0字•|•$"
    },
    "searchUrl": "https://android.jjwxc.net/androidapi/search?versionCode=191&keyword={{key;java.put(\"key\",key)}}&type=1&page={{page;java.put(\"page\",page)}}&searchType=8&sortMode=DESC",
    "variableComment": "1、书籍变量（当前书）\n填写 [去章节序号] —— 去除章节序号\n填写[章节名]  ——  变为第xx章 章节名\n\n填写 [目录简介【符号】] —— 章节简介放到目录列表，正文不出现 符号：跟章节名连接时中间的符号，如 目录简介【 】，中间将为空格\n\n填写 [评论+评论数量]——如 评论50  则可以显示50条评论，数量必填\n\n填写 [开启购买/关闭购买]  —— 如 开启购买 则会开启自动购买下五章【确认以后点右上角三点刷新才会生效，使用完毕后最好删除，避免重复请求】\n\n2、源变量（所有书）\n同书籍变量",
    "weight": 0
  }
]